# DRAIL Runner è„šæœ¬é›†åˆ

è¿™ä¸ªæ–‡ä»¶å¤¹åŒ…å«äº†ç”¨äºç®¡ç†DRAILå¤šæ¨¡å‹å¹¶è¡Œè®­ç»ƒçš„shellè„šæœ¬ã€‚

## ğŸ“‹ è„šæœ¬æ¦‚è§ˆ

| è„šæœ¬ | åŠŸèƒ½ |
|------|------|
| `run_all_models.sh` | å¯åŠ¨å¤šä¸ªæ¨¡å‹çš„å¹¶è¡Œè®­ç»ƒ |
| `stop_all_models.sh` | åœæ­¢æ­£åœ¨è¿è¡Œçš„è®­ç»ƒä¼šè¯ |
| `status_all_models.sh` | æŸ¥çœ‹è®­ç»ƒçŠ¶æ€ |
| `quick_start.sh` | äº¤äº’å¼å¿«é€Ÿå¯åŠ¨å™¨ |
| `example_usage.sh` | ä½¿ç”¨ç¤ºä¾‹å’Œæµ‹è¯•è„šæœ¬ |

## ğŸš€ å¿«é€Ÿå¼€å§‹

### æ–¹æ³•ä¸€ï¼šä½¿ç”¨äº¤äº’å¼å¯åŠ¨å™¨ï¼ˆæ¨èï¼‰

```bash
./runner/quick_start.sh
```

è¿™ä¼šå¯åŠ¨ä¸€ä¸ªäº¤äº’å¼ç•Œé¢ï¼ŒæŒ‡å¯¼æ‚¨å®Œæˆæ•´ä¸ªè®­ç»ƒå¯åŠ¨è¿‡ç¨‹ã€‚

### æ–¹æ³•äºŒï¼šç›´æ¥ä½¿ç”¨å‘½ä»¤è¡Œ

```bash
# å¯åŠ¨pickç¯å¢ƒå™ªå£°çº§åˆ«1.25çš„æ‰€æœ‰æ¨¡å‹
./runner/run_all_models.sh pick 1.25

# å¯åŠ¨pushç¯å¢ƒå™ªå£°1.50ä¸“å®¶è½¬æ¢2000çš„æ‰€æœ‰æ¨¡å‹  
./runner/run_all_models.sh push 1.50 2000

# å¯åŠ¨mazeç¯å¢ƒä¸“å®¶è¦†ç›–ç‡75%çš„æ‰€æœ‰æ¨¡å‹
./runner/run_all_models.sh maze 75

# å¯åŠ¨walkerç¯å¢ƒ5è½¨è¿¹çš„æ‰€æœ‰æ¨¡å‹
./runner/run_all_models.sh walker 5traj
```

## ğŸ“Š ç¯å¢ƒå’Œå‚æ•°è¯´æ˜

### æ”¯æŒçš„ç¯å¢ƒ

| ç¯å¢ƒ | å‚æ•°å«ä¹‰ | å¯ç”¨å€¼ |
|------|----------|--------|
| `pick` | FetchPickå™ªå£°çº§åˆ« | 1.00, 1.25, 1.50, 1.75, 2.00 |
| `push` | FetchPushå™ªå£°çº§åˆ«ï¼ˆ+ä¸“å®¶è½¬æ¢æ•°ï¼‰ | 1.00, 1.25, 1.50, 1.75, 2.00 |
| `hand` | HandRotateå™ªå£°çº§åˆ« | 1.00, 1.25, 1.50, 1.75, 2.00 |
| `ant` | AntGoalå™ªå£°çº§åˆ« | 0.00, 0.01, 0.03, 0.05 |
| `maze` | Mazeä¸“å®¶è¦†ç›–ç‡ | 25, 50, 75, 100 |
| `walker` | Walkerè½¨è¿¹æ•°é‡ | 1traj, 2traj, 3traj, 5traj |
| `halfcheetah` | HalfCheetahè½¨è¿¹æ•°é‡ | 1traj, 2traj, 3traj, 5traj |
| `hopper` | Hopperè½¨è¿¹æ•°é‡ | 1traj, 2traj, 3traj, 5traj |

### æ”¯æŒçš„æ¨¡å‹

| æ¨¡å‹ | æè¿° |
|------|------|
| `drail` | DRAIL (åŸºç¡€ç‰ˆæœ¬) |
| `drail-un` | DRAIL (ä¸ç¡®å®šæ€§ç‰ˆæœ¬) |
| `fm-drail` | Flow Matching DRAIL |
| `gail` | Generative Adversarial Imitation Learning |
| `gailGP` | GAIL with Gradient Penalty |
| `wail` | Wasserstein Adversarial Imitation Learning |
| `bc` | Behavior Cloning |
| `diffusion-policy` | Diffusion Policy |

### ç‰¹æ®Šè¯´æ˜

**FetchPushç¯å¢ƒ**: æ”¯æŒäºŒå±‚ç»“æ„ï¼ŒæŸäº›å™ªå£°çº§åˆ«ä¸‹æœ‰å¤šä¸ªä¸“å®¶è½¬æ¢æ•°é€‰é¡¹ï¼š
```bash
# pushç¯å¢ƒçš„ç‰¹æ®Šç”¨æ³•
./runner/run_all_models.sh push 1.50 2000   # å™ªå£°1.50ï¼Œä¸“å®¶è½¬æ¢2000
./runner/run_all_models.sh push 1.50 5000   # å™ªå£°1.50ï¼Œä¸“å®¶è½¬æ¢5000
./runner/run_all_models.sh push 1.50        # å™ªå£°1.50ï¼Œæ‰€æœ‰å¯ç”¨çš„ä¸“å®¶è½¬æ¢æ•°
```

## ğŸ› ï¸ è¯¦ç»†ä½¿ç”¨è¯´æ˜

### run_all_models.sh

å¯åŠ¨å¤šæ¨¡å‹å¹¶è¡Œè®­ç»ƒçš„ä¸»è„šæœ¬ã€‚

```bash
ç”¨æ³•: ./runner/run_all_models.sh <ç¯å¢ƒå> [å‚æ•°å€¼] [å­å‚æ•°å€¼]

ç¤ºä¾‹:
  ./runner/run_all_models.sh pick 1.25        # ç‰¹å®šé…ç½®
  ./runner/run_all_models.sh pick             # è¯¥ç¯å¢ƒçš„æ‰€æœ‰é…ç½®
  ./runner/run_all_models.sh push 1.50 2000   # pushç¯å¢ƒç‰¹æ®ŠäºŒå±‚ç»“æ„
```

**åŠŸèƒ½è¯´æ˜:**
- ä¸ºæ¯ä¸ªæ¨¡å‹åˆ›å»ºç‹¬ç«‹çš„tmuxä¼šè¯å’Œçª—å£
- è‡ªåŠ¨æ¿€æ´»condaç¯å¢ƒå¹¶è¿è¡Œwandbè„šæœ¬
- æ”¯æŒä¸€æ¬¡æ€§å¯åŠ¨æ‰€æœ‰æ¨¡å‹æˆ–ç‰¹å®šå‚æ•°é…ç½®çš„æ‰€æœ‰æ¨¡å‹
- è‡ªåŠ¨è·³è¿‡ä¸å­˜åœ¨çš„é…ç½®æ–‡ä»¶

**tmuxä¼šè¯å‘½åè§„åˆ™:**
- æ ¼å¼: `drail-<ç¯å¢ƒ>-<å‚æ•°>`
- ç¤ºä¾‹: `drail-pick-125`, `drail-maze-75`, `drail-walker-5traj`
- å‚æ•°ä¸­çš„å°æ•°ç‚¹å’Œæ–œæ ä¼šè¢«è½¬æ¢ä¸ºçŸ­æ¨ªçº¿

### stop_all_models.sh

åœæ­¢æ­£åœ¨è¿è¡Œçš„è®­ç»ƒä¼šè¯ã€‚

```bash
ç”¨æ³•: ./runner/stop_all_models.sh [ç¯å¢ƒå] [å‚æ•°å€¼]

ç¤ºä¾‹:
  ./runner/stop_all_models.sh              # åœæ­¢æ‰€æœ‰drailä¼šè¯
  ./runner/stop_all_models.sh pick         # åœæ­¢pickç¯å¢ƒçš„æ‰€æœ‰ä¼šè¯  
  ./runner/stop_all_models.sh pick 125     # åœæ­¢ç‰¹å®šä¼šè¯
```

### status_all_models.sh

æŸ¥çœ‹è®­ç»ƒçŠ¶æ€å’Œä¼šè¯ä¿¡æ¯ã€‚

```bash
ç”¨æ³•: ./runner/status_all_models.sh [ç¯å¢ƒå]

ç¤ºä¾‹:
  ./runner/status_all_models.sh            # æŸ¥çœ‹æ‰€æœ‰drailä¼šè¯çŠ¶æ€
  ./runner/status_all_models.sh pick       # æŸ¥çœ‹pickç¯å¢ƒçš„ä¼šè¯çŠ¶æ€
```

**æ˜¾ç¤ºä¿¡æ¯:**
- ä¼šè¯åç§°å’Œå‚æ•°è§£é‡Š
- è¿è¡Œçš„æ¨¡å‹æ•°é‡å’Œåç§°
- ä¼šè¯åˆ›å»ºæ—¶é—´
- çª—å£ä¿¡æ¯

## ğŸ”§ é…ç½®è¦æ±‚

### å¿…éœ€è½¯ä»¶
- `tmux` (ç‰ˆæœ¬ >= 2.6)
- `conda` (å·²é…ç½®Genbotç¯å¢ƒ)
- `bash` (ç‰ˆæœ¬ >= 4.0)

### ç›®å½•ç»“æ„è¦æ±‚
```
project_root/
â”œâ”€â”€ configs/
â”‚   â”œâ”€â”€ pick/
â”‚   â”‚   â”œâ”€â”€ 1.00/
â”‚   â”‚   â”œâ”€â”€ 1.25/
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”œâ”€â”€ push/
â”‚   â”‚   â”œâ”€â”€ 1.50/
â”‚   â”‚   â”‚   â”œâ”€â”€ 2000/
â”‚   â”‚   â”‚   â”œâ”€â”€ 5000/
â”‚   â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚   â””â”€â”€ ...
â”‚   â””â”€â”€ ...
â”œâ”€â”€ utils/
â”‚   â””â”€â”€ wandb.sh
â””â”€â”€ runner/
    â”œâ”€â”€ run_all_models.sh
    â””â”€â”€ ...
```

## ğŸ¯ å¸¸è§ä½¿ç”¨åœºæ™¯

### åœºæ™¯1ï¼šæµ‹è¯•æ–°ç®—æ³•
```bash
# åœ¨pickç¯å¢ƒçš„ä¸€ä¸ªå™ªå£°çº§åˆ«ä¸‹æµ‹è¯•æ‰€æœ‰æ¨¡å‹
./runner/run_all_models.sh pick 1.25
```

### åœºæ™¯2ï¼šå®Œæ•´å®éªŒ
```bash
# è¿è¡Œpickç¯å¢ƒçš„æ‰€æœ‰é…ç½®
./runner/run_all_models.sh pick
```

### åœºæ™¯3ï¼šç‰¹å®šç¯å¢ƒå¯¹æ¯”
```bash
# è¿è¡Œå¤šä¸ªç¯å¢ƒè¿›è¡Œå¯¹æ¯”
./runner/run_all_models.sh pick 1.25
./runner/run_all_models.sh hand 1.25
./runner/run_all_models.sh ant 0.01
```

### åœºæ™¯4ï¼šç›‘æ§å’Œç®¡ç†
```bash
# æŸ¥çœ‹çŠ¶æ€
./runner/status_all_models.sh

# è¿æ¥åˆ°ç‰¹å®šä¼šè¯
tmux attach -t drail-pick-125

# åœæ­¢ç‰¹å®šç¯å¢ƒ
./runner/stop_all_models.sh pick
```

## ğŸ› æ•…éšœæ’é™¤

### é—®é¢˜1ï¼štmuxä¼šè¯åç§°é”™è¯¯
**ç°è±¡**: æŠ¥é”™ `bad session name`
**è§£å†³**: æ›´æ–°åˆ°tmux 2.6+ï¼Œæˆ–æ£€æŸ¥ä¼šè¯åæ˜¯å¦ç¬¦åˆè§„èŒƒ

### é—®é¢˜2ï¼šé…ç½®æ–‡ä»¶ä¸å­˜åœ¨
**ç°è±¡**: æ‰€æœ‰æ¨¡å‹éƒ½è¢«è·³è¿‡
**è§£å†³**: æ£€æŸ¥configsç›®å½•ç»“æ„å’Œyamlæ–‡ä»¶æ˜¯å¦å­˜åœ¨

### é—®é¢˜3ï¼šcondaç¯å¢ƒæœªæ‰¾åˆ°
**ç°è±¡**: æ— æ³•æ¿€æ´»Genbotç¯å¢ƒ
**è§£å†³**: 
```bash
conda info --envs  # æ£€æŸ¥ç¯å¢ƒæ˜¯å¦å­˜åœ¨
conda create -n Genbot python=3.8  # å¦‚æœä¸å­˜åœ¨åˆ™åˆ›å»º
```

### é—®é¢˜4ï¼šæƒé™é—®é¢˜
**ç°è±¡**: è„šæœ¬æ— æ³•æ‰§è¡Œ
**è§£å†³**:
```bash
chmod +x runner/*.sh
```

## ğŸ“ˆ ç›‘æ§å’Œæ—¥å¿—

### æŸ¥çœ‹å®æ—¶æ—¥å¿—
```bash
# è¿æ¥åˆ°ç‰¹å®šæ¨¡å‹çš„çª—å£
tmux attach -t drail-pick-125:drail

# æŸ¥çœ‹æ‰€æœ‰çª—å£
tmux list-windows -t drail-pick-125
```

### åˆ†ç¦»å’Œé‡è¿
```bash
# åˆ†ç¦»ä¼šè¯ (åœ¨tmuxå†…éƒ¨)
Ctrl+b d

# é‡æ–°è¿æ¥
tmux attach -t drail-pick-125

# åœ¨çª—å£é—´åˆ‡æ¢ (åœ¨tmuxå†…éƒ¨)
Ctrl+b n  # ä¸‹ä¸€ä¸ªçª—å£
Ctrl+b p  # ä¸Šä¸€ä¸ªçª—å£
```

## ğŸ”— ç›¸å…³é“¾æ¥

- [DRAILé¡¹ç›®ä¸»é¡µ](../README.md)
- [é…ç½®æ–‡ä»¶è¯´æ˜](../configs/)
- [Tmuxå®˜æ–¹æ–‡æ¡£](https://github.com/tmux/tmux/wiki)
- [Weights & Biasesæ–‡æ¡£](https://docs.wandb.ai/)

## ğŸ“ å¼€å‘è¯´æ˜

å¦‚éœ€ä¿®æ”¹æˆ–æ‰©å±•è¿™äº›è„šæœ¬ï¼š

1. **æ·»åŠ æ–°ç¯å¢ƒ**: åœ¨å„è„šæœ¬ä¸­æ›´æ–°ç¯å¢ƒåˆ—è¡¨å’Œå‚æ•°è§£æé€»è¾‘
2. **ä¿®æ”¹æ¨¡å‹åˆ—è¡¨**: æ›´æ–°`MODELS`æ•°ç»„
3. **æ›´æ”¹å‘½åè§„åˆ™**: ä¿®æ”¹`clean_param_for_session`å‡½æ•°
4. **æ·»åŠ æ–°åŠŸèƒ½**: ç¡®ä¿åœ¨æ‰€æœ‰ç›¸å…³è„šæœ¬ä¸­ä¿æŒä¸€è‡´æ€§

è„šæœ¬è®¾è®¡éµå¾ªæ¨¡å—åŒ–åŸåˆ™ï¼Œæ¯ä¸ªè„šæœ¬éƒ½å¯ä»¥ç‹¬ç«‹ä½¿ç”¨ï¼ŒåŒæ—¶ä¿æŒæ¥å£çš„ä¸€è‡´æ€§ã€‚